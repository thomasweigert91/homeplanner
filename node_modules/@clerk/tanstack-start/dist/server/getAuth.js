import { stripPrivateDataFromObject } from '@clerk/backend/internal';
import { errorThrower } from '../utils/index.js';
import { noFetchFnCtxPassedInGetAuth } from '../utils/errors.js';
import { authenticateRequest } from './authenticateRequest.js';
import { loadOptions } from './loadOptions.js';

// src/server/getAuth.ts
async function getAuth(request, opts) {
  if (!request) {
    return errorThrower.throw(noFetchFnCtxPassedInGetAuth);
  }
  const loadedOptions = loadOptions(request, opts);
  const requestState = await authenticateRequest(request, loadedOptions);
  return stripPrivateDataFromObject(requestState.toAuth());
}

export { getAuth };
//# sourceMappingURL=getAuth.js.map
//# sourceMappingURL=getAuth.js.map
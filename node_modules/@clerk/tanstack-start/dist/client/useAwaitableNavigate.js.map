{"version":3,"sources":["../../src/client/useAwaitableNavigate.ts"],"names":[],"mappings":";;;;AAMO,IAAM,uBAAuB,MAAM;AACxC,EAAA,MAAM,WAAW,WAAY,EAAA;AAC7B,EAAA,MAAM,WAAW,WAAY,EAAA;AAC7B,EAAA,MAAM,mBAAsB,GAAA,KAAA,CAAM,MAAkB,CAAA,EAAE,CAAA;AACtD,EAAA,MAAM,aAAa,MAAM;AACvB,IAAA,mBAAA,CAAoB,OAAQ,CAAA,OAAA,CAAQ,CAAW,OAAA,KAAA,OAAA,EAAS,CAAA;AACxD,IAAA,mBAAA,CAAoB,OAAQ,CAAA,MAAA,CAAO,CAAG,EAAA,mBAAA,CAAoB,QAAQ,MAAM,CAAA;AAAA,GAC1E;AACA,EAAA,MAAM,CAAC,CAAA,EAAG,eAAe,CAAA,GAAI,aAAc,EAAA;AAE3C,EAAA,KAAA,CAAM,UAAU,MAAM;AACpB,IAAW,UAAA,EAAA;AAAA,GACb,EAAG,CAAC,QAAQ,CAAC,CAAA;AAEb,EAAA,OAAO,CAAC,OAA6B,KAAA;AACnC,IAAO,OAAA,IAAI,QAAQ,CAAO,GAAA,KAAA;AACxB,MAAA,eAAA,CAAgB,MAAM;AACpB,QAAoB,mBAAA,CAAA,OAAA,CAAQ,KAAK,GAAG,CAAA;AACpC,QAAI,GAAA,CAAA,QAAA,CAAS,OAAO,CAAC,CAAA;AAAA,OACtB,CAAA;AAAA,KACF,CAAA;AAAA,GACH;AACF","file":"useAwaitableNavigate.js","sourcesContent":["import type { NavigateOptions } from '@tanstack/react-router';\nimport { useLocation, useNavigate } from '@tanstack/react-router';\nimport React, { useTransition } from 'react';\n\ntype Resolve = (value?: unknown) => void;\n\nexport const useAwaitableNavigate = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const resolveFunctionsRef = React.useRef<Resolve[]>([]);\n  const resolveAll = () => {\n    resolveFunctionsRef.current.forEach(resolve => resolve());\n    resolveFunctionsRef.current.splice(0, resolveFunctionsRef.current.length);\n  };\n  const [_, startTransition] = useTransition();\n\n  React.useEffect(() => {\n    resolveAll();\n  }, [location]);\n\n  return (options: NavigateOptions) => {\n    return new Promise(res => {\n      startTransition(() => {\n        resolveFunctionsRef.current.push(res);\n        res(navigate(options));\n      });\n    });\n  };\n};\n"]}